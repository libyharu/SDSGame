"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{4320:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var i=a(5155),s=a(2115),r=a(1856),h=a.n(r);class l extends h().Scene{preload(){this.load.spritesheet("player1","/sdsgame/player.png",{frameWidth:32,frameHeight:36}),this.load.spritesheet("player2","/sdsgame/player.png",{frameWidth:32,frameHeight:36}),this.load.image("background","/sdsgame/Background2.png")}create(){this.add.image(400,300,"background"),this.leftCharacter=this.add.sprite(150,400,"player1",0).setOrigin(.5,1).setScale(2).setFlipX(!0),this.rightCharacter=this.add.image(650,400,"player2").setOrigin(.5,1).setScale(2),this.textBox=this.add.rectangle(400,500,760,120,0,.7).setVisible(!1),this.textContent=this.add.text(80,460,"",{font:"20px Arial",color:"#FFFFFF",wordWrap:{width:640}}).setVisible(!1),this.anims.create({key:"player_walk",frames:this.anims.generateFrameNumbers("player1",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"player_idle",frames:[{key:"player1",frame:0}],frameRate:1}),this.input.keyboard&&(this.wasdKeys=this.input.keyboard.addKeys({W:h().Input.Keyboard.KeyCodes.W,A:h().Input.Keyboard.KeyCodes.A,S:h().Input.Keyboard.KeyCodes.S,D:h().Input.Keyboard.KeyCodes.D})),this.input.on("pointerup",e=>{this.leftCharacter&&this.rightCharacter&&50>h().Math.Distance.Between(this.leftCharacter.x,this.leftCharacter.y,this.rightCharacter.x,this.rightCharacter.y)&&this.startDialogue()})}update(){if(!this.dialogueVisible&&this.leftCharacter&&this.wasdKeys){let e=!1;this.wasdKeys.A.isDown?(this.leftCharacter.x-=2,this.leftCharacter.flipX=!1,e=!0):this.wasdKeys.D.isDown&&(this.leftCharacter.x+=2,this.leftCharacter.flipX=!0,e=!0),this.wasdKeys.W.isDown?(this.leftCharacter.y-=2,e=!0):this.wasdKeys.S.isDown&&(this.leftCharacter.y+=2,e=!0),e?this.leftCharacter.play("player_walk",!0):this.leftCharacter.play("player_idle",!0)}}startDialogue(){!this.dialogueVisible&&this.textBox&&this.textContent&&(this.dialogueVisible=!0,this.textBox.setVisible(!0),this.textContent.setVisible(!0),this.currentTextIndex=0,this.updateDialogue(),this.input.keyboard&&(this.input.keyboard.enabled=!1),this.input.on("pointerdown",this.advanceText,this))}updateDialogue(){if(this.textContent&&this.leftCharacter&&this.rightCharacter&&this.dialogue.length>0&&this.currentTextIndex<this.dialogue.length){let e=this.dialogue[this.currentTextIndex];this.textContent.setText("".concat(e.speaker,": ").concat(e.text)),"player1"===e.speaker?(this.leftCharacter.setAlpha(1),this.rightCharacter.setAlpha(.5)):(this.leftCharacter.setAlpha(.5),this.rightCharacter.setAlpha(1))}}advanceText(){this.currentTextIndex++,this.currentTextIndex<this.dialogue.length?this.updateDialogue():this.endDialogue()}endDialogue(){if(this.textBox&&this.textContent){var e,t;this.dialogueVisible=!1,this.textBox.setVisible(!1),this.textContent.setVisible(!1),this.input.keyboard&&(this.input.keyboard.enabled=!0),null===(e=this.leftCharacter)||void 0===e||e.setAlpha(1),null===(t=this.rightCharacter)||void 0===t||t.setAlpha(1),this.input.off("pointerdown",this.advanceText,this)}}constructor(){super({key:"RPGVisualNovelScene"}),this.textBox=null,this.textContent=null,this.leftCharacter=null,this.rightCharacter=null,this.wasdKeys=null,this.dialogueVisible=!1,this.currentTextIndex=0,this.dialogue=[{speaker:"player1",text:"안녕하세요, Player2!"},{speaker:"player2",text:"안녕하세요, Player1!"},{speaker:"player1",text:"오늘도 평화로운 날이네요."},{speaker:"player2",text:"맞아요! 좋은 하루 보내세요."},{speaker:"player1",text:"대화3."},{speaker:"player2",text:"대화4."},{speaker:"player1",text:"대화5"},{speaker:"player2",text:"대화6"}]}}let n={type:h().AUTO,width:800,height:600,scene:[l],parent:"phaser-container"},d=()=>(s.useEffect(()=>{let e=new(h()).Game(n);return()=>{e.destroy(!0)}},[]),(0,i.jsx)("div",{id:"phaser-container",style:{width:"800px",height:"600px"}}))}}]);